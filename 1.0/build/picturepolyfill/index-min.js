/*! responsive - v1.0 - 2013-04-28 4:36:58 PM
* Copyright (c) 2013 miaojing; Licensed  */
KISSY.add("gallery/responsive/1.0/matchmedia/index",function(){"use strict";function e(e){var t,n=document,i=n.documentElement,r=i.firstElementChild||i.firstChild,s=n.createElement("body"),l=n.createElement("div");return l.id="mq-test-1",l.style.cssText="position:absolute;top:-100em",s.style.background="none",s.appendChild(l),l.innerHTML='&shy;<style media="'+e+'"> #mq-test-1 { width: 42px; }</style>',i.insertBefore(s,r),t=42===l.offsetWidth,i.removeChild(s),t}return e}),KISSY.add("gallery/responsive/1.0/picturepolyfill/index",function(e,t,n,i,r){"use strict";function s(){var e=this;s.superclass.constructor.call(e),e.init()}return e.extend(s,i,{init:function(){var t,n=this;n._responsiveImg(),document.documentElement.clientWidth,window.onresize=function(){t&&t.cancel(),t=e.later(n._responsiveImg,200,!1,n)}},_responsiveImg:function(){for(var e=window.document,t=e.getElementsByTagName("picture"),n=0,i=t.length;i>n;n++){for(var s=t[n].getElementsByTagName("source"),l=null,o=[],a=0,d=s.length;d>a;a++){var c=s[a].getAttribute("media");(!c||r(c))&&o.push(s[a])}if(l=t[n].getElementsByTagName("img")[0],o.length){var m=o.pop(),u=m.getAttribute("srcset");if(l||(l=e.createElement("img"),l.alt=t[n].getAttribute("alt"),t[n].appendChild(l)),u){var h=window.devicePixelRatio||1,s=u.split(",");window.devicePixelRatio>1;for(var p=s.length,f=p-1;f>=0;f--){var v=s[f].replace(/^\s*/,"").replace(/\s*$/,"").split(" "),g=parseFloat(v[1],10);if(h>=g){if(l.getAttribute("src")!==v[0]){var y=document.createElement("img");y.src=v[0],y.onload=function(){this.width=this.cloneNode(!0).width/g},l.parentNode.replaceChild(y,l)}break}}}else l.src=m.getAttribute("src")}}}}),s},{requires:["dom","event","base","gallery/gallery/responsive/1.0/matchmedia/index"]});